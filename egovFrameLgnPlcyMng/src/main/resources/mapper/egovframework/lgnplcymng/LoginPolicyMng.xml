<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.auth.dao.AuthInfoDao">

	<!-- Maria -->
    <select id="selectAuthList" resultType="hashMap">
			SELECT AUTHOR_CODE
			     , AUTHOR_NM
			     , AUTHOR_DC
			     , AUTHOR_CREAT_DT
			     , CHANGE_DT
			  FROM COMTNAUTHORINFO
    </select>
    
    <select id="selectAuthDetail"  parameterType="Map" resultType="hashMap">
			SELECT AUTHOR_CODE
			     , AUTHOR_NM
			     , AUTHOR_DC
			     , AUTHOR_CREAT_DT
			     , CHANGE_DT
			  FROM COMTNAUTHORINFO
			 WHERE AUTHOR_CODE = '${AUTHCD}'
    </select>


    <insert id="insertAuthInfo" parameterType="hashMap">
			INSERT INTO COMTNAUTHORINFO (
			  AUTHOR_CODE
			, AUTHOR_NM
			, AUTHOR_DC
			, AUTHOR_CREAT_DT
			, CHANGE_DT
			) VALUES (
			  #{AUTHCD}
			, #{AUTHNM}
			, #{AUTHDC}
			, DATE_FORMAT(CURRENT_TIMESTAMP, '%Y%m%d%H%i%s')
			, DATE_FORMAT(CURRENT_TIMESTAMP, '%Y%m%d%H%i%s')
			)
    </insert>
    
    <update id="updateAuthInfo" parameterType="hashMap">
			UPDATE COMTNAUTHORINFO
			   SET CHANGE_DT = DATE_FORMAT(CURRENT_TIMESTAMP, '%Y%m%d%H%i%s')
			    <if test='AUTHNM != null'> 	, AUTHOR_NM	= '${AUTHNM}' 	</if>
			    <if test='AUTHDC != null'> 	, AUTHOR_DC	= '${AUTHDC}' 	</if>
			 WHERE AUTHOR_CODE           = '${AUTHCD}'
    </update>
    
    <delete id="deleteAuthInfo" parameterType="hashMap">
			DELETE FROM COMTNAUTHORINFO
			 WHERE AUTHOR_CODE           = '${AUTHCD}'
    </delete>
    
    <select id="selectAuthInfoCnt" parameterType="Map" resultType="int">
			SELECT COUNT(*) CNT
			  FROM COMTNAUTHORINFO
			 WHERE AUTHOR_CODE = '${AUTHCD}'
    </select>
    
    
</mapper> 